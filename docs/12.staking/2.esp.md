---
sidebar_position: 2
---

# Early Staking Pool

이 페이지에서는 KASH 생태계의 첫번째 스테이킹 풀인 Early Staking Pool의 특징을 설명합니다. 이는 초기 세일즈 참여자에 대한 보상 지급목적의 풀입니다.

따라서 이 페이지에서 설명하는 내용이 KASH내의 모든 스테이킹 풀에 적용되는 성격의 메커니즘은 아닙니다.

---

### Early Participant Bonus

이 문서에서는 편의상 세일즈(토큰 판매)를 다음과 같이 구분하여 분류합니다. 

+ Token Sales Stage
    + 초기 세일즈 : 프로젝트가 가동되기 위한 최소 조건인, 최초 5,000,000개 까지의 KASH 판매
    + 추가 세일즈 : 초기 세일즈 이후 5,000,000개의 KASH 판매. 즉, 5,000,001번째 ~ 10,000,000번째 KASH 판매까지
    + 기타 발행량 : 시장 상황에 따라 PoL 혹은 RBS에 의한 가격 안정화를 위해 채권 시장을 통해 발행한 KASH

Early Staking Pool은 이 중 더 불확실성이 높고, 프로젝트에 보다 큰 공헌을 한 초기 세일즈 참여자들에 대해 최대한의 보상 분배를, 추가 세일즈 참여자에게도 합리적인 수준의 보상을 지급 하는 것에 초점을 두고 설계 되었습니다.

+ $EPB$ : 세일즈 참여자에 대한 보너스 배율입니다.
    $$
    EPB_{q} =
    \begin{cases}
        A / (q + k)^2 + C & (0 \le q \le 5m) \\
        2  & (5m \lt q \le 10m)
    \end{cases}
    $$
    + $q$ : 세일즈의 진행 상황 (판매량) 입니다. (KASH)
    + $k, A, C$ : 아래 조건을 달성하는 EPB 곡선을 구성하는 상수입니다. 정확한 값은 Appendix에서 참조 가능합니다.
        + 단조 감소 : $q_1<q_2 \implies EPB_{q1} \ge EPB_{q2}$
        + 보너스 배율 : $EPB_0 = 25$, $EPB_{5m} = 4 + \epsilon$
        + 정적분 : $\int_{0}^{5m} EPB_q \, dq = 30m - \epsilon$
        + 오차 : $0< \epsilon ≪ 1$

EPB 배율이 5라는 것은 구매한 토큰을 예치하여 보상을 지급받을 때 마치 "보너스 없이 예치액의 6배 만큼 예치한 것"처럼 보상을 받을 수 있다는 의미입니다.

이 EPB는 프로토콜이 참여자에게 제공하고자 의도하는 수익률을 의미하며, 실질적으로는 아래 DCR을 통해 실현될 수 있습니다.

---

### EPB / DCR Graph

다음은 Early Staking Pool에서 판매량(q)에 따라 EPB와 발급된 누적 DCR을 시각화 한 그래프입니다.

![KASH EPB Graph](/img/kash_staking_epb.png)

+ q는 1,000,000 KASH 단위입니다.

---

### Debt Creation Right

세일즈 참여자들은 구매량과 구매 시기에 비례해 부채를 발급받을 수 있는 권리(DCR)를 얻게 됩니다. 이 권리를 스테이킹에 토큰을 예치할 때 사용하여 실질적인 보상이 증가하는 효과를 얻을 수 있습니다.

+ $DCR_{earn}$ : 세일즈 참여 (토큰 구매) 를 통해 받게되는 DCR 수량
    $$
    DCR_{earn} = \int_{q_b}^{q_a} EPB_q \, dq
    $$
    + $q_b$ : 사용자가 토큰을 구매하기 전의 판매량
    + $q_a$ : 사용자가 토큰을 구매하고난 후의 판매량
    + 즉 q1~q2 구간의 EPB 평균 * 구매량에 해당하는 만큼 DCR을 받게 됩니다.
    
📌 추가 세일즈 참여자의 경우 현재의 Early Staking Pool에서 DCR을 행사할 기회가 없을 수 있습니다. 아래 Priority Reservation 파트를 반드시 참고하세요.

---

### Max Leverage

발급 받은 DCR을 제한 없이 모두 행사할 수 있는 것은 아닙니다. 구매 수량과 발급받은 DCR 개수에 비례하여 최대 부채율(레버리지)가 제한되어 있습니다.

+ $MaxLeverage_{user}$ : 유저가 DCR을 통해 가질 수 있는 최대 레버리지
    $$
    MaxLeverage_{user} = \frac{\sum{UserTotalEarnedDCR}}{\sum{UserTotalBoughtKASH}} + 1
    $$
    + UserTotalEarnedDCR : 해당 유저가 전체 세일즈간 수령한 DCR 총량
    + UserTotalBoughtKASH : 해당 유저가 전체 세일즈간 구매한 KASH 총량
    $$
    DCR_{exercisable} = Min(DCR_{remain}, (MaxLeverage_{user}-1) \times Deposit)
    $$

다만 일반적으로는 이러한 수식을 모두 이해할 필요 없이, 세일즈로 구매한 토큰을 전부 예치하면 해당 구매로 발급받은 DCR을 모두 행사 가능합니다. 이는 실제 예치금은 소량만 예치하고 DCR만 행사하여 불공정한 형태로 보상을 받는 행위를 방지하는 장치입니다.

---

### Virtual Share

사용자는 예치시 1 DCR당 1 KASH 가치로 환산하여 가상 지분을 추가로 발급 받을 수 있습니다. 이 가상 지분은 그 가치만큼 "부채"가 동시에 발생하여 지분을 청산할 때 다시 상환해야 합니다. 

+ Virtual Share : DCR에 의해 추가로 발행된 가상 지분입니다. 
    $$
    Share_{virtual} = DCR_{used} / Price_{share}
    $$
    $$
    Debt_{new} = Debt_{old} + DCR_{used}
    $$
    
가상 지분의 의의는, 보상의 누적에 의한 지분의 가치 상승분 만큼을 차익으로 얻을 수 있는데 있습니다. 혹은 더 많은 수량을 예치하여 더 많은 지분을 가진 것처럼 이자를 받을 수 있다는 것과 수학적으로 동일한 의미입니다.

+ Weighted Share : 가상 지분을 포함한 가중 지분입니다. Early Staking Pool에서는 이 가중 지분이 보상 분배의 기준이 됩니다.
    $$
    Share_{weighted} = Share_{principle} + Share_{virtual}
    $$
    + $Share_{principle}$ : 예치 원금에 의해 발행된 지분

---

### Formula Modification

Early Staking Pool에서는 이 가상 지분 개념을 도입함으로써 다음과 같은 몇가지 차이점이 있습니다.

+ 일반적인 스테이킹 풀의 Share가 사용되는 몇가지 장소, 특히 보상 계산시에 Weighted Share가 대신 사용됩니다.

이를 적용하여 아래와 같이 몇가지 수식이 변경됩니다.

+ Share Price : 각 지분 하나가 나타내는 가치입니다. 진입시나 청산시 이 가격을 기준으로 KASH와 교환됩니다.
    $$
    Price_{share} = \frac{(Pool_{principles} + TotalDebt + Pool_{rewards})}{TotalWeightedShare}
    $$
    + $Pool_{principles}$ : 스테이킹한 유저들의 원금 총액입니다.
    + $TotalDebt$ : 스테이킹한 유저들의 부채 총량입니다.
    + $Pool_{rewards}$ : 스테이킹 풀에 실현된 보상 총량입니다.
    + $TotalWeightedShare$ : 스테이킹한 유저들의 가중 지분 총량입니다.

+ Withdrawable Balance : 소지한 지분에 대해 실제 실현하여 출금 가능한 금액입니다.
    $$
    Amount_{Withdrawable} = Share_{weighted} \times Price_{share} - Debt
    $$
    + 출금시에는 Share를 소각하고 소각한 비율만큼 Debt도 상환해야 합니다. 출금할 금액 기준으로는 아래와 같이 소각할 Share 개수를 설정할 수 있습니다. 
    $$
    Share_{burn} = Amount_{withdraw} \times  \frac{Share_{weighted}}{Share_{weighted} \times Price_{share} - Debt_{current}}
    $$
    + $Amount_{withdraw}$ : 사용자가 인출을 희망하는 금액
    + $Share_{burn}$ : 해당 금액을 인출하기 위해 소각할 지분 수량
    + $Debt_{burn}$ : 해당 지분을 소각하기 위해 상환할 부채

---

### Guaranteed Minimum Reward

+ Early Pool의 가중 지분의 발행량은 최대 30m으로 제한 되어 있습니다. 
    + 이는 가중 지분 하나의 가치가 일정 이하로 희석되지 않게 해줍니다. 반대로 최대치만큼 발행되어 있지 않은 경우엔 보다 많은 보상을 가능성이 있습니다.
+ Early Pool에 할당된 보상 풀 규모도 30m KASH입니다. 
    + 따라서 각 가중 지분은 최소한 1 KASH 이상의 이자를, 전체 스테이킹 기간에 걸쳐 받습니다.
+ 초기 세일즈에 의해 발행되는 DCR 역시 30m을 초과하지 않습니다.
    + 초기 세일즈 참여자들은 각자의 DCR을 전부 행사할 수 있습니다.

1 가중 지분은 "스테이킹을 처음부터 끝까지 참여하는 경우"에 한해서는 최소한 1 KASH 이상의 보상을 반드시 분배 받으므로, DCR 하나가 잠재적으로 1 KASH의 미래 수익을 보장하게 됩니다. 곧 초기 세일즈 참여자들은 자신의 EPB에 해당하는 배율만큼 수익률을 보장받습니다.

단, 스테이킹이 진행되는 도중에 참여하는 사용자의 경우에는 가중 지분 하나가 수령 가능한 1 KASH의 이자중 일부가 이미 지급된 상황입니다. 따라서 가중 지분 하나가 1 KASH 만큼의 추가 이자를 보장하지는 않지만, 참여 시점에 따른 잔여 보상을 기준으로 계산된 최소 수익을 보장받을 수 있습니다.

📌 여기에서 최저 수익률은 프로젝트가 정상적으로 진행되었을 때, 수학적으로 KASH 단위 토큰 수량의 증가량을 보장하는 것입니다. 프로토콜은 KASH의 리저브에 기반하여 가치를 안정적으로 부양하는 것을 목표로 하지만, 일시적인 KASH의 가격 하락 등의 리스크 등이 충분히 존재하며, 목표 자산 (FIAT 등) 기준으로 수익을 보장 받는 것이 아닙니다.

---

### Staking Reservation

(예시)

Early Staking Pool의 토큰 예치량은 Wegithed Share 기준으로 제한되어 있습니다. 그리고 이 제한은 초기 세일즈에 의한 DCR을 포함한 수량과 일치하게 설계 되었습니다. 따라서 초기 세일즈 물량에 대해서는 전량 스테이킹 참여가 가능하지만, 나머지 물량은 중도 이탈이 생기기 전까지 참여가 불가능합니다.

프로토콜에서는 이 중도 이탈로 인해 스테이킹이 가능한 시점에 자동으로 스테이킹에 참여할 수 있도록 예약을 지원합니다. 예약을 위해서는 희망하는 만큼의 KASH를 예약풀에 예치해 놓아야 합니다. 

각 Epoch의 마지막, 보상이 계산되기 직전에 대기 순번 순으로 예치 예약이 실현됩니다. 이는 스테이킹 풀의 예치 한도 내에서만 이루어지며, 경우에 따라 희망한 금액의 일부만 부분적으로 실현될 수 있습니다.

예약은 실현 되기 전 언제든 취소하고 KASH를 회수할 수 있으나, 추후 다시 예약을 원하는 경우 순번을 다시 기다려야 합니다. 이는 부분 회수시에도 마찬가지로, 부분 회수 후 남은 수량에 대해서는 순번이 유지 되지만, 회수한 KASH를 다시 기존 순번에 추가할 수는 없습니다.

+ Priority Reservation
    + 초기 세일즈 판매분 모두가 끝까지 스테이킹 유지되는 경우 추가 세일즈 참여자는 Early Staking Pool에 DCR을 행사할 기회가 아예 없을 수 있습니다. (추가 세일즈 참여자를 위한 추가적인 스테이킹 풀은 추후에 오픈될 예정입니다??)
    + 추가 세일즈 참여자들의 기여를 인정하고 그 행사 기회를 최대한 부여하기 위해, DCR을 소유하고 있는 사용자에게 참여 가능한 경우 참여 우선권을 부여합니다.
    + 예약은 참여 우선권이 존재하는 예약 대기열 내에서 그 순번에 따라 먼저 실현되고, 이후 우선권이 없는 예약의 대기열이 순번대로 실현됩니다.
    + 우선권은 DCR을 전부 행사하기 위한 금액 한도 내에서 부여됩니다. 이 외의 추가 예치액은 일반 예약으로 간주되어 별도 순번을 부여받습니다. 다만 일반적인 경우, 세일즈에서 구매한 토큰 전체를 예치할 수 있는 만큼의 DCR이 부여됩니다.

---

### Exmaple Senario

$$
y(x) = \frac{6.160392620707085906}{(x + 0.540906246443305252)^2} + 3.944556263515440025
\\
F(x) = -\frac{6.160392620707085906}{x + 0.540906246443305252} + 3.944556263515440025 \cdot x + \text{Const}
$$

+ EPB, DCR
    + 현재 총 1m만큼 판매가 진행된 상태
    + 사용자는 0.1m에 해당하는 KASH를 구매하려 함
    + EPB(1m) = , EPB(1.1m) = , E(EPB) = 
    + 지급받는 DCR = 

+ Epoch Reward
    ... (작성 예정)

---

이어지는 섹션에서는 KASH에서의 일반적인 스테이킹에 대한 구조 설계를 설명합니다.