---
id: more
sidebar_position: 3
---

# Advanced Guide

Early Staking Pool은 핵심 개념이라 할 수 있는 EPB/DCR, 가상 지분 외에도 여러가지 특징이 있습니다.

---

### Guaranteed Minimum Reward

+ 스테이킹 풀의 가중 지분 발행량이 제한되어 있습니다 : Early Staking Pool은 30m
+ 스테이킹 풀에 할당된 보상의 총량이 정해져 있습니다 : Early Staking Pool은 30m

$\rightarrow$ 1 가중 지분은 최소한 1 KASH 이상의 보상을 반드시 분배 받습니다.

+ 세일즈시 지분 가격이 정해져 있습니다 : Early Staking Pool은 1 KASH / Share

$\rightarrow$ DCR 하나가 잠재적으로 1 KASH의 미래 수익을 보장하게 됩니다. 

+ 초기 세일즈에 의해 발행되는 토큰 총량이 정해져 있습니다 : Early Sales는 5m
+ 초기 세일즈에 의해 발행되는 DCR의 총량이 정해져 있습니다 : Early Sales는 25m

$\rightarrow$ 초기 세일즈의 모든 판매된 토큰과 발행된 DCR이 풀에 예치 가능합니다

따라서 초기 세일즈 참여자들은 자신의 EPB에 해당하는 배율만큼의 수익률을 보장받을 수 있습니다.

Epoch가 한번 이상 경과된 후에 참여하는 사용자의 경우에는 가중 지분 하나가 수령 가능한 1 KASH의 이자중 일부가 이미 지급된 상황입니다. 따라서 가중 지분 하나가 1 KASH 만큼의 추가 이자를 보장하지는 않지만, 그럼에도 참여 시점에 따른 잔여 보상을 기준으로 최소 수익을 계산하여 보장받을 수 있습니다.

:::note
이는 KASH 단위 토큰 수량의 증가를 수익이라고 표현하고, 그 증가량을 수학적으로 보장하는 것입니다. 보상 분배 종료시까지 참여하는 경우, 특히 초기 세일즈 참여자의 경우 구매 즉시 모든 토큰과 DCR을 스테이킹할 때 기준입니다. 
:::

---

### Principal Conversion Right

풀이 절반이상 경과($Epoch_{Current} \ge \frac{N_{epochs}}{2}$)하면 사용자는 자신의 지분을 소각하지 않고도 원금을 출금할 수 있는, Principal Conversion Right(PCR)이라는 권리를 행사할 수 있습니다.

+ 세일즈에 참여시 해당 정보 (구매 KASH, 지불 자산, 지불액) 가 기록됩니다.
+ 이후 풀이 절반 경과한 시점부터 PCR 행사가 가능합니다.
+ 이를 행사하면 세일즈 구매 KASH에 해당하는 가치 만큼이 인출 됩니다.
+ 유저의 줄어든 지분 만큼 부채를 발행하여 동일한 수량의 가상 지분으로 대체합니다.
+ 인출한 KASH는 소각하고 최초 지불했던 자산을 돌려받을 수 있습니다.
+ 결과적으로 유저는 원금을 회수하면서 계속해서 스테이킹 이자를 수령할 수 있습니다.

Principle Conversion을 통한 원금 회수시에는 최대 레버리지를 일시적으로 초과하는 것이 가능합니다. 단, 이를 통해 레버리지가 증가한 이후에는 추가로 DCR을 행사할 때 최대 레버리지 조건를 초과하지 않도록 해야 합니다.

:::note
PCR은 부분적으로 행사할 수 없으며 원금 전체에 대해서만 행사 가능합니다. 따라서 행사 이전에 일부라도 인출(지분 소각)이 발생한 경우 PCR을 행사할 수 없습니다. 이는 지분을 이용한 복리 시스템의 특성상 원금이라는 개념이 모호하고, 이를 추적하는데 과도한 복잡성이 발생함에 기인한 정책입니다. 
:::

---

### Staking Reservation

Early Staking Pool의 토큰 예치량은 가중 지분 기준으로 제한되어 있습니다. 그리고 이 제한은 초기 세일즈 수량 및 이에 의해 발행되는 DCR 수량과 일치하게 설계 되었습니다. 따라서 초기 세일즈 물량에 대해서는 전량 스테이킹 참여가 가능하지만, 이외의 경우에는 중도 이탈이 생기기는 경우에 한해서만 참여가 가능합니다.

프로토콜에서는 이 중도 이탈로 인해 스테이킹이 가능한 시점에 자동으로 스테이킹에 참여할 수 있도록 예약을 지원합니다. 예약을 위해서는 희망하는 만큼의 KASH를 예약풀에 미리 예치해 두어야 합니다. 

각 Epoch의 마지막, 보상이 계산되기 직전에 Keeper에 의해 대기 순번 순으로 예치 예약이 실현됩니다. 이는 스테이킹 풀의 예치 한도 내에서만 이루어지며, 경우에 따라 희망한 금액의 일부만 부분적으로 실현될 수 있습니다. 이 경우 나머지 금액에 대해서는 최우선 순위 상태의 예약으로 남겨집니다.

유저는 예약이 실현 되기 전 언제든 취소하고 KASH를 회수할 수 있으나, 추후 다시 예약을 원하는 경우 순번을 다시 기다려야 합니다. 이는 부분 회수시에도 마찬가지로, 부분 회수 후 남은 예약 수량에 대해서는 순번이 유지 되지만, 회수한 KASH를 다시 기존 순번에 추가할 수는 없습니다.

스테이킹 예약 풀에 예약이 존재하는 경우, 직접 스테이킹에 참여할 수 없습니다. 지분 한도가 예약 수량보다 많고, 즉시 스테이킹을 희망하는 경우에는 유저가 직접 예약 실현 함수를 실행하는 트랜젝션을 일으킬 수도 있습니다.